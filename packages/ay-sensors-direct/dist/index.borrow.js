(()=>{"use strict";var e={};(()=>{e.d=(t,n)=>{for(var r in n){if(e.o(n,r)&&!e.o(t,r)){Object.defineProperty(t,r,{enumerable:true,get:n[r]})}}}})();(()=>{e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{e.r=e=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}})();var t={};e.d(t,{default:()=>tt});var n={};e.r(n);e.d(n,{backFlowEvent:()=>D,buildUpConnectionEvent:()=>H,buttonClickEvent:()=>x,contentClickEvent:()=>A,endOfVideoPlayEvent:()=>F,ftAdButtonClickEvent:()=>Y,ftAdPageviewEvent:()=>J,homeButtonClickEvent:()=>j,homePageviewEvent:()=>O,navigationBarButtonClickEvent:()=>C,noticeButtonClickEvent:()=>I,noticePageviewEvent:()=>E,pageviewEvent:()=>U,searchEvent:()=>L,searchPageviewEvent:()=>B,searchResultClickEvent:()=>T,splitScreenExposeEvent:()=>$,sqPageViewEvent:()=>Q,statisticsEvent:()=>V,taskProcessingResultsEvent:()=>q,toastPageviewEvent:()=>R,userLabelEvent:()=>z,videoPlayEvent:()=>N,vipFlagTerminateEvent:()=>G,vipFlagTerminateNowEvent:()=>W,yyAdPageviewEvent:()=>M});var r={};e.r(r);e.d(r,{appendProfile:()=>Le,deleteProfile:()=>Te,incrementProfile:()=>Be,setOnceProfile:()=>Re,setProfile:()=>xe,unsetProfile:()=>Ae});var o={};e.r(o);e.d(o,{registerPage:()=>Ne});var i={};e.r(i);e.d(i,{track:()=>Fe});var s={};e.r(s);e.d(s,{login:()=>Ve});var c={};e.r(c);e.d(c,{trackSeoOnce:()=>Me});var a;(function(e){e["track_signup"]="track_signup";e["track"]="track";e["profile_set"]="profile_set";e["profile_set_once"]="profile_set_once";e["profile_increment"]="profile_increment";e["profile_delete"]="profile_delete";e["profile_append"]="profile_append";e["profile_unset"]="profile_unset"})(a||(a={}));var u;(function(e){e["beacon"]="beacon";e["ajax"]="ajax"})(u||(u={}));var l;(function(e){e["PC"]="PC";e["MB"]="MB"})(l||(l={}));function f(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)}var d=function(){var e=(new Date).getTime();var t=e;return function(e){t=(9301*t+49297)%233280;return Math.ceil(t/233280*e)}}();function g(){if(typeof Uint32Array==="function"){var e="";if(typeof crypto!=="undefined"){e=crypto}else if(typeof msCrypto!=="undefined"){e=msCrypto}if(f(e)&&e.getRandomValues){var t=new Uint32Array(1);var n=e.getRandomValues(t)[0];var r=Math.pow(2,32);return n/r}}return d(1e19)/1e19}var p=function(){var e=function(){for(var e=1*new Date,t=0;e==1*new Date;){t++}return e.toString(16)+t.toString(16)};var t=function(){return g().toString(16).replace(".","")};var n=function(){function e(e,t){var n=0;for(var r=0;r<t.length;r++){n|=t[r]<<8*r}return e^n}var t=navigator.userAgent;var n=[];var r=0;for(var o=0;o<t.length;o++){var i=t.charCodeAt(o);n.unshift(255&i);if(n.length>=4){r=e(r,n);n=[]}}if(n.length>0){r=e(r,n)}return r.toString(16)};return function(){var r=String(screen.height*screen.width);r=r&&/\d{5,}/.test(r)?r.toString(16):String(31242*g()).replace(".","").slice(0,8);var o=e()+"-"+t()+"-"+n()+"-"+r+"-"+e();return o?o:(String(g())+String(g())+String(g())).slice(2,15)}}();const m=p;const v=m;const b=e=>e===null||e===undefined;const y=()=>{};function P(){let e;let t;const n=new Promise(((n,r)=>{e=n;t=r}));n.resolve=e;n.reject=t;return n}function w(e){return Object.keys(e).reduce(((t,n)=>{if(e[n]!==undefined&&e[n]!==null){t[n]=e[n]}return t}),{})}function _(e,t){if(typeof t!=="object"||t===null){return null}let n=Object.keys(t);n=n.filter((n=>{const r=e[n];const o=t[n];if(o===undefined||o===null){return false}if(r===undefined||r===null){return true}return r.toString()!==o.toString()}));return n.length===0?null:n.reduce(((e,n)=>{e[n]=t[n];return e}),{})}const h={track:()=>void 0};const S=(e,t,n)=>{h.track(e,t,n)};const k=e=>{h.track=e};function O(e){S("HomePageview",e)}function j(e){S("HomeButtonClick",e)}function $(e){S("SplitScreenExpose",e)}function C(e){S("NavigationBarButtonClick",e)}function E(e){S("NoticePageview",e)}function I(e){S("NoticeButtonClick",e)}function U(e){S("Pageview",e)}function x(e){S("ButtonClick",e)}function R(e){S("ToastPageview",e)}function L(e){S("Search",e)}function B(e){S("SearchPageview",e)}function T(e){S("SearchResultClick",e)}function A(e){S("ContentClick",e)}function N(e){S("VideoPlay",e)}function F(e){S("EndOfVideoPlay",e)}function q(e){S("TaskProcessingResults",e)}function V(e){S("Statistics",e)}function D(e){S("BackFlow",e)}function M(e){S("YY_AdPageview",e)}function J(e){S("FT_AdPageview",e)}function Y(e){S("FT_AdButtonClick",e)}function z(e){S("UserLabel",e)}function H(e){S("BuildUpConnection",e)}function Q(e){S("SQ_PageView",e)}function W(e){S("VipFlagTerminateNow",e)}function G(e){S("VipFlagTerminate",e)}class K extends Error{constructor(e){super(e)}}class X extends K{constructor(e){super(`ay sensors: 函数${e} 未初始化！`)}}class Z extends K{constructor(e){super(`ay sensors: ${e} 还未实现！`)}}function ee(e){let t=false;let n;return function(...r){if(t){throw new K("This function can only be called once.")}t=true;n=e(...r);return n}}function te(e,t,n,r){const o=[e,t,n,r].filter((e=>typeof e==="object"&&e)).reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{});o.cid=o.cid||o.creative_id;delete o.creative_id;o.cname=o.cname||o.creative_name;delete o.creative_name;o.pname=o.pname||o.pid_name;delete o.pid_name;o.package_name=o.package_name||o.packageName;delete o.packageName;o.amount_payable=o.amount_payable||o.amountPayable;delete o.amountPayable;o.from_pid=o.from_pid||o.pid;o.from_pname=o.from_pname||o.pname;S("YY_OrderNow",o)}const ne=ee((e=>{k(e);const t=Object.assign(Object.assign({},n),{yyOrderNowEvent:te});return t}));const re={getSensorsProfileProperties:()=>{throw new X("getSensorsProfileProperties")},getSensorsPublicProperties:()=>{throw new X("getSensorsPublicProperties")},setProfile:()=>{throw new X("setProfile")},registerPage:()=>{throw new X("registerPage")}};function oe(e,t){const n=typeof e==="object"?e:w(re.getSensorsProfileProperties(t||{}));if(!(n&&Object.keys(n).length>0)){return}re.setProfile(n)}function ie(e,t){const n=typeof e==="object"?e:w(re.getSensorsPublicProperties(t||{}));if(!(n&&Object.keys(n).length>0)){return}re.registerPage(n)}function se(e){oe(e,{onlyUserInfo:true})}function ce(e){ie(e,{onlyUserInfo:true})}const ae=ee((e=>{Object.assign(re,e);return{updateSensorsProfileProperties:oe,updateSensorsPublicProperties:ie,updateSensorsProfilePropertiesOnlyUserInfo:se,updateSensorsPublicPropertiesOnlyUserInfo:ce}}));const ue=(e,t)=>{console.info(`%c AySensors %c ${e} ${t} %c`,"background:#4CAF50 ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#7158e2 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:transparent")};const le="AySensors";const fe={debug:console.debug.bind(null,le),log:console.log.bind(null,le),info:console.info.bind(null,le),warn:console.warn.bind(null,le),error:console.error.bind(null,le)};function de(e,t,n){const r={data:t};if(n){r.expiration=pe(n)}localStorage.setItem(e,JSON.stringify(r))}function ge(e){const t=localStorage.getItem(e);if(t){const n=JSON.parse(t);if(me(n)){localStorage.removeItem(e);return null}return n.data}return null}function pe(e){const t=(new Date).getTime();if(e.unit==="days"){return t+e.value*24*60*60*1e3}else if(e.unit==="hours"){return t+e.value*60*60*1e3}else if(e.unit==="minutes"){return t+e.value*60*1e3}throw new K("Invalid expiration unit")}function me(e){const t=(new Date).getTime();return!!(e.expiration&&e.expiration<=t)}const ve={setStorage:de,getStorage:ge};const be=ve;const ye="storage_key_anonymity_id";const Pe={unit:"days",value:365*100};const we={imgUseCrossOrigin:false,sendType:u.beacon,serverURL:`${location.protocol}//mcs.aiyongtech.com/sa?project=default`,app:"",awaiter:Promise.resolve(null),getLoginId(){throw new X("getLoginId")},getSensorsPublicProperties(){throw new X("getSensorsPublicProperties")},getSensorsProfileProperties(){throw new X("getSensorsProfileProperties")},initFinished:false,waitSensorsInitFinished:P(),platform:l.MB,requestInterface:null,currentProfile:{},currentPublicProperties:{},distinctId:null,anonymityId:Se()};const _e=we;const he=()=>{const{distinctId:e,anonymityId:t}=we;return e||t};function Se(){const e=be.getStorage(ye);if(e!==null&&e!==undefined&&e.trim().length>0){return e}const t=v();be.setStorage(ye,t,Pe);return t}async function ke(e,t,n=true){const{waitSensorsInitFinished:r,initFinished:o,sendType:i,serverURL:s}=_e;if(n&&!o){await r}const c=Oe(e);fe.log(`send -> [${e.type}] : [${e.event}] :`,JSON.parse(JSON.stringify(e)));const{requestInterface:a}=_e;let l;if(typeof s==="string"){l=[{name:null,url:s}]}else{l=s}for(const n of l){n.name&&fe.log("send to:",n.name);if(typeof a==="function"){a({data:e,callback:t,body:c,serverURL:n.url});break}switch(i){case u.beacon:$e({data:e,callback:t,body:c,serverURL:n.url});break;case u.ajax:je({data:e,callback:t,body:c,serverURL:n.url});break;default:je({data:e,callback:t,body:c,serverURL:n.url});break}}}const Oe=e=>{const t=Ee(JSON.stringify(e));return`data=${encodeURIComponent(t)}&ext=${encodeURIComponent(`crc=${Ie(t)}`)}`};const je=({body:e,callback:t,serverURL:n})=>fetch(n,{method:"POST",body:e}).then((e=>{typeof t==="function"&&t(true);return e})).catch((e=>{typeof t==="function"&&t(false);return Promise.reject(e)}));const $e=({data:e,body:t,callback:n,serverURL:r})=>{if(typeof(navigator===null||navigator===void 0?void 0:navigator.sendBeacon)==="function"){navigator.sendBeacon(r,t)}else{Ce({data:e,body:t,callback:n,serverURL:r})}};const Ce=({body:e,callback:t,serverURL:n})=>{const{imgUseCrossOrigin:r}=_e;const o=document.createElement("img");o.width=1;o.height=1;if(r){o.crossOrigin="anonymous"}const i=e=>{o.onload=null;o.onerror=null;o.onabort=null;if(t){typeof t==="function"&&t(e)}setTimeout((()=>{o.src=""}),2800)};o.onload=i.bind(null,true);o.onabort=i.bind(null,false);o.onerror=o.onabort;if(n.indexOf("?")===-1){o.src=`${n}?${e}`}else{o.src=`${n}&${e}`}};function Ee(e){let t;try{t=btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number(`0x${t}`)))))}catch(n){t=e}return t}function Ie(e){if(typeof e!=="string")return 0;let t=0;let n=null;if(e.length===0)return t;for(let r=0;r<e.length;r++){n=e.charCodeAt(r);t=(t<<5)-t+n;t&=t}return t}function Ue(e,t,n){const{anonymityId:r}=_e;const o=he();const i={distinct_id:o,identities:{$identity_login_id:o},login_id:o,anonymous_id:r,properties:e,time:Date.now(),type:t};ke(i,n)}function xe(e,t){const n=_(_e.currentProfile,e);if(!n){fe.info("setProfile: no need to update");return}Ue(n,a.profile_set,t);const{currentProfile:r}=_e;Object.assign(r,n)}function Re(e,t){const n=_(_e.currentProfile,e);if(!n){fe.info("setOnceProfile: no need to update");return}Ue(n,a.profile_set_once,t);const{currentProfile:r}=_e;Object.assign(r,n)}function Le(e,t){throw new Z("appendProfile")}function Be(e,t){throw new Z("incrementProfile")}function Te(e,t){throw new Z("deleteProfile")}function Ae(e,t){throw new Z("unsetProfile")}function Ne(e){const{currentPublicProperties:t}=_e;Object.assign(t,e)}function Fe(e,t,n){qe(e,t,n)}function qe(e,t,n){const{currentPublicProperties:r}=_e;const o=he();const i=Object.assign(Object.assign({},t),r);const s={distinct_id:o,identities:{$identity_login_id:o},properties:i,time:Date.now(),type:a.track,event:e};ke(s,n)}function Ve(e,t){De(e,t)}function De(e,t){const{anonymityId:n,currentPublicProperties:r}=_e;_e.distinctId=e;const o={distinct_id:e,identities:{$identity_login_id:e},login_id:e,anonymous_id:n,original_id:n,properties:Object.assign({},r),time:Date.now(),type:a.track_signup,event:"$SignUp"};ke(o,t,false)}function Me(e){const t=Ye();Re(t,e)}const Je=/:\/\/([^/]+)/;function Ye(){var e;const{referrer:t}=document;const n=(e=t.match(Je))===null||e===void 0?void 0:e[1];fe.info("channel source host",n);if(!n){return{$first_referrer:t,$first_referrer_host:n,$first_traffic_source_type:He(n)}}let r={};if(n==="www.baidu.com"){r=ze()}const{$utm_source:o,$utm_medium:i,$utm_term:s,$utm_content:c,$utm_campaign:a}=r;return{$first_referrer:t,$first_referrer_host:n,$first_traffic_source_type:o||i||s||c||a?"付费广告流量":He(n),$first_search_keyword:r.keyword,$utm_source:o,$utm_medium:i,$utm_term:s,$utm_content:c,$utm_campaign:a}}function ze(e=location.search){const t=new URLSearchParams(e);const n=[];for(const e of t.keys()){if("e_keywordid"===e||e.startsWith("e_keywordid")){n.push(t.get(e))}}return{$utm_content:t.get("utm_content"),$utm_source:t.get("utm_source"),$utm_medium:t.get("utm_medium"),$utm_campaign:t.get("utm_campaign"),$utm_term:t.get("utm_term"),keyword:n.length?n.join(","):undefined}}function He(e){if(!e){return"直接流量"}if(["www.baidu.","m.baidu.","m.sm.cn","so.com","sogou.com","youdao.com","google.","yahoo.com","bing.com","ask.com"].includes(e)){return"自然搜索流量"}if(["weibo.com","kaixin001.com","douban.com","qzone.qq.com","zhihu.com","tieba.baidu.com","weixin.qq.com"].includes(e)){return"社交网站流量"}return"引荐流量"}const Qe=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),o),i),s),c);const We=Qe;function Ge(e){const t=Object.assign({},e);const{sendType:n,imgUseCrossOrigin:r,serverURL:o,app:i,platform:s,getSensorsProfileProperties:c,getSensorsPublicProperties:a,getLoginId:l,awaiter:f,requestInterface:d}=t;if(r!==undefined&&typeof r!=="boolean"){throw new K("imgUseCrossOrigin 必须是布尔值")}const g=Object.values(u);if(!g.includes(n)){throw new K(`SendType 必须是这其中一个：${g.toString()}`)}if(Array.isArray(o)){if(o.length===0){throw new K("serverURL 不能为空数组")}const e=o.findIndex((e=>typeof(e===null||e===void 0?void 0:e.name)!=="string"||typeof(e===null||e===void 0?void 0:e.url)!=="string"));if(e!==-1){throw new K("serverURL 数组中的每一项必须是一个对象，且包含 name 和 url")}}else if(typeof o!=="string"){throw new K("serverURL 必须是一个string 或者一个 数组 {name: string, url: string}[]")}if(typeof i!=="string"){throw new K("app 必须是是字符串")}if(typeof s!=="string"){throw new K("platform 必须是是字符串")}if(typeof c!=="function"){throw new K("getSensorsProfileProperties 必须是一个函数")}if(typeof a!=="function"){throw new K("getSensorsPublicProperties 必须是一个函数")}if(typeof l!=="function"){throw new K("getLoginId 必须是一个函数")}if(e.beforeAdOrderNowBeacon){throw new Error("已不再支持beforeAdOrderNowBeacon")}if(typeof f==="object"){if(!(f instanceof Promise)){throw new K("awaiter 必须是一个 Promise")}}else{delete t.awaiter}if(d&&typeof d!=="function"){throw new K("requestInterface 必须是一个函数")}Object.assign(_e,t);if(_e.beginInitSensor){return Ke()}return Promise.resolve()}async function Ke(){const{waitSensorsInitFinished:e,awaiter:t,getLoginId:n,getSensorsPublicProperties:r,getSensorsProfileProperties:o}=_e;await t;const i=n();const s=r({init:true});const c=o({init:true});fe.info("init:",i,c,s);We.registerPage(s);if(!(i===undefined||i===null)){We.login(i)}if(typeof c==="object"&&Object.keys(c).length>0){We.setProfile(c)}e.resolve(null);_e.initFinished=true;return true}const Xe=ae({getSensorsProfileProperties(e){return _e.getSensorsProfileProperties(e)},getSensorsPublicProperties(e){return _e.getSensorsPublicProperties(e)},setProfile:xe,registerPage:Ne});const Ze=ne(Fe);const et=Object.assign(Object.assign(Object.assign(Object.assign({},We),Xe),Ze),{init:Ge});ue("direct","1.0.7");const tt=et;window.aySensors=t["default"]})();